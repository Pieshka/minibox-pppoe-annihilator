#!/usr/sbin/nft -f

table ip mangle {
    map ttli {
        typeof ip ttl : verdict;
        flags constant;
        elements = {
            0: jump ttli0,
            1: jump ttli1,
            2: jump ttli2,
            3: jump ttli3,
            4: jump ttli4,
            5: jump ttli5,
            6: jump ttli6,
            7: jump ttli7,
            8: jump ttli8,
            9: jump ttli9,
            10: jump ttli10,
            11: jump ttli11,
            12: jump ttli12,
            13: jump ttli13,
            14: jump ttli14,
            15: jump ttli15,
            16: jump ttli16,
            17: jump ttli17,
            18: jump ttli18,
            19: jump ttli19,
            20: jump ttli20,
            21: jump ttli21,
            22: jump ttli22,
            23: jump ttli23,
            24: jump ttli24,
            25: jump ttli25,
            26: jump ttli26,
            27: jump ttli27,
            28: jump ttli28,
            29: jump ttli29,
            30: jump ttli30,
            31: jump ttli31,
            32: jump ttli32,
            33: jump ttli33,
            34: jump ttli34,
            35: jump ttli35,
            36: jump ttli36,
            37: jump ttli37,
            38: jump ttli38,
            39: jump ttli39,
            40: jump ttli40,
            41: jump ttli41,
            42: jump ttli42,
            43: jump ttli43,
            44: jump ttli44,
            45: jump ttli45,
            46: jump ttli46,
            47: jump ttli47,
            48: jump ttli48,
            49: jump ttli49,
            50: jump ttli50,
            51: jump ttli51,
            52: jump ttli52,
            53: jump ttli53,
            54: jump ttli54,
            55: jump ttli55,
            56: jump ttli56,
            57: jump ttli57,
            58: jump ttli58,
            59: jump ttli59,
            60: jump ttli60,
            61: jump ttli61,
            62: jump ttli62,
            63: jump ttli63,
            64: jump ttli64,
            65: jump ttli65,
            66: jump ttli66,
            67: jump ttli67,
            68: jump ttli68,
            69: jump ttli69,
            70: jump ttli70,
            71: jump ttli71,
            72: jump ttli72,
            73: jump ttli73,
            74: jump ttli74,
            75: jump ttli75,
            76: jump ttli76,
            77: jump ttli77,
            78: jump ttli78,
            79: jump ttli79,
            80: jump ttli80,
            81: jump ttli81,
            82: jump ttli82,
            83: jump ttli83,
            84: jump ttli84,
            85: jump ttli85,
            86: jump ttli86,
            87: jump ttli87,
            88: jump ttli88,
            89: jump ttli89,
            90: jump ttli90,
            91: jump ttli91,
            92: jump ttli92,
            93: jump ttli93,
            94: jump ttli94,
            95: jump ttli95,
            96: jump ttli96,
            97: jump ttli97,
            98: jump ttli98,
            99: jump ttli99,
            100: jump ttli100,
            101: jump ttli101,
            102: jump ttli102,
            103: jump ttli103,
            104: jump ttli104,
            105: jump ttli105,
            106: jump ttli106,
            107: jump ttli107,
            108: jump ttli108,
            109: jump ttli109,
            110: jump ttli110,
            111: jump ttli111,
            112: jump ttli112,
            113: jump ttli113,
            114: jump ttli114,
            115: jump ttli115,
            116: jump ttli116,
            117: jump ttli117,
            118: jump ttli118,
            119: jump ttli119,
            120: jump ttli120,
            121: jump ttli121,
            122: jump ttli122,
            123: jump ttli123,
            124: jump ttli124,
            125: jump ttli125,
            126: jump ttli126,
            127: jump ttli127,
            128: jump ttli128,
            129: jump ttli129,
            130: jump ttli130,
            131: jump ttli131,
            132: jump ttli132,
            133: jump ttli133,
            134: jump ttli134,
            135: jump ttli135,
            136: jump ttli136,
            137: jump ttli137,
            138: jump ttli138,
            139: jump ttli139,
            140: jump ttli140,
            141: jump ttli141,
            142: jump ttli142,
            143: jump ttli143,
            144: jump ttli144,
            145: jump ttli145,
            146: jump ttli146,
            147: jump ttli147,
            148: jump ttli148,
            149: jump ttli149,
            150: jump ttli150,
            151: jump ttli151,
            152: jump ttli152,
            153: jump ttli153,
            154: jump ttli154,
            155: jump ttli155,
            156: jump ttli156,
            157: jump ttli157,
            158: jump ttli158,
            159: jump ttli159,
            160: jump ttli160,
            161: jump ttli161,
            162: jump ttli162,
            163: jump ttli163,
            164: jump ttli164,
            165: jump ttli165,
            166: jump ttli166,
            167: jump ttli167,
            168: jump ttli168,
            169: jump ttli169,
            170: jump ttli170,
            171: jump ttli171,
            172: jump ttli172,
            173: jump ttli173,
            174: jump ttli174,
            175: jump ttli175,
            176: jump ttli176,
            177: jump ttli177,
            178: jump ttli178,
            179: jump ttli179,
            180: jump ttli180,
            181: jump ttli181,
            182: jump ttli182,
            183: jump ttli183,
            184: jump ttli184,
            185: jump ttli185,
            186: jump ttli186,
            187: jump ttli187,
            188: jump ttli188,
            189: jump ttli189,
            190: jump ttli190,
            191: jump ttli191,
            192: jump ttli192,
            193: jump ttli193,
            194: jump ttli194,
            195: jump ttli195,
            196: jump ttli196,
            197: jump ttli197,
            198: jump ttli198,
            199: jump ttli199,
            200: jump ttli200,
            201: jump ttli201,
            202: jump ttli202,
            203: jump ttli203,
            204: jump ttli204,
            205: jump ttli205,
            206: jump ttli206,
            207: jump ttli207,
            208: jump ttli208,
            209: jump ttli209,
            210: jump ttli210,
            211: jump ttli211,
            212: jump ttli212,
            213: jump ttli213,
            214: jump ttli214,
            215: jump ttli215,
            216: jump ttli216,
            217: jump ttli217,
            218: jump ttli218,
            219: jump ttli219,
            220: jump ttli220,
            221: jump ttli221,
            222: jump ttli222,
            223: jump ttli223,
            224: jump ttli224,
            225: jump ttli225,
            226: jump ttli226,
            227: jump ttli227,
            228: jump ttli228,
            229: jump ttli229,
            230: jump ttli230,
            231: jump ttli231,
            232: jump ttli232,
            233: jump ttli233,
            234: jump ttli234,
            235: jump ttli235,
            236: jump ttli236,
            237: jump ttli237,
            238: jump ttli238,
            239: jump ttli239,
            240: jump ttli240,
            241: jump ttli241,
            242: jump ttli242,
            243: jump ttli243,
            244: jump ttli244,
            245: jump ttli245,
            246: jump ttli246,
            247: jump ttli247,
            248: jump ttli248,
            249: jump ttli249,
            250: jump ttli250,
            251: jump ttli251,
            252: jump ttli252,
            253: jump ttli253,
            254: jump ttli254
        }
    }
    chain ttli0 { ip ttl set 1;}
    chain ttli1 { ip ttl set 2;}
    chain ttli2 { ip ttl set 3;}
    chain ttli3 { ip ttl set 4;}
    chain ttli4 { ip ttl set 5;}
    chain ttli5 { ip ttl set 6;}
    chain ttli6 { ip ttl set 7;}
    chain ttli7 { ip ttl set 8;}
    chain ttli8 { ip ttl set 9;}
    chain ttli9 { ip ttl set 10;}
    chain ttli10 { ip ttl set 11;}
    chain ttli11 { ip ttl set 12;}
    chain ttli12 { ip ttl set 13;}
    chain ttli13 { ip ttl set 14;}
    chain ttli14 { ip ttl set 15;}
    chain ttli15 { ip ttl set 16;}
    chain ttli16 { ip ttl set 17;}
    chain ttli17 { ip ttl set 18;}
    chain ttli18 { ip ttl set 19;}
    chain ttli19 { ip ttl set 20;}
    chain ttli20 { ip ttl set 21;}
    chain ttli21 { ip ttl set 22;}
    chain ttli22 { ip ttl set 23;}
    chain ttli23 { ip ttl set 24;}
    chain ttli24 { ip ttl set 25;}
    chain ttli25 { ip ttl set 26;}
    chain ttli26 { ip ttl set 27;}
    chain ttli27 { ip ttl set 28;}
    chain ttli28 { ip ttl set 29;}
    chain ttli29 { ip ttl set 30;}
    chain ttli30 { ip ttl set 31;}
    chain ttli31 { ip ttl set 32;}
    chain ttli32 { ip ttl set 33;}
    chain ttli33 { ip ttl set 34;}
    chain ttli34 { ip ttl set 35;}
    chain ttli35 { ip ttl set 36;}
    chain ttli36 { ip ttl set 37;}
    chain ttli37 { ip ttl set 38;}
    chain ttli38 { ip ttl set 39;}
    chain ttli39 { ip ttl set 40;}
    chain ttli40 { ip ttl set 41;}
    chain ttli41 { ip ttl set 42;}
    chain ttli42 { ip ttl set 43;}
    chain ttli43 { ip ttl set 44;}
    chain ttli44 { ip ttl set 45;}
    chain ttli45 { ip ttl set 46;}
    chain ttli46 { ip ttl set 47;}
    chain ttli47 { ip ttl set 48;}
    chain ttli48 { ip ttl set 49;}
    chain ttli49 { ip ttl set 50;}
    chain ttli50 { ip ttl set 51;}
    chain ttli51 { ip ttl set 52;}
    chain ttli52 { ip ttl set 53;}
    chain ttli53 { ip ttl set 54;}
    chain ttli54 { ip ttl set 55;}
    chain ttli55 { ip ttl set 56;}
    chain ttli56 { ip ttl set 57;}
    chain ttli57 { ip ttl set 58;}
    chain ttli58 { ip ttl set 59;}
    chain ttli59 { ip ttl set 60;}
    chain ttli60 { ip ttl set 61;}
    chain ttli61 { ip ttl set 62;}
    chain ttli62 { ip ttl set 63;}
    chain ttli63 { ip ttl set 64;}
    chain ttli64 { ip ttl set 65;}
    chain ttli65 { ip ttl set 66;}
    chain ttli66 { ip ttl set 67;}
    chain ttli67 { ip ttl set 68;}
    chain ttli68 { ip ttl set 69;}
    chain ttli69 { ip ttl set 70;}
    chain ttli70 { ip ttl set 71;}
    chain ttli71 { ip ttl set 72;}
    chain ttli72 { ip ttl set 73;}
    chain ttli73 { ip ttl set 74;}
    chain ttli74 { ip ttl set 75;}
    chain ttli75 { ip ttl set 76;}
    chain ttli76 { ip ttl set 77;}
    chain ttli77 { ip ttl set 78;}
    chain ttli78 { ip ttl set 79;}
    chain ttli79 { ip ttl set 80;}
    chain ttli80 { ip ttl set 81;}
    chain ttli81 { ip ttl set 82;}
    chain ttli82 { ip ttl set 83;}
    chain ttli83 { ip ttl set 84;}
    chain ttli84 { ip ttl set 85;}
    chain ttli85 { ip ttl set 86;}
    chain ttli86 { ip ttl set 87;}
    chain ttli87 { ip ttl set 88;}
    chain ttli88 { ip ttl set 89;}
    chain ttli89 { ip ttl set 90;}
    chain ttli90 { ip ttl set 91;}
    chain ttli91 { ip ttl set 92;}
    chain ttli92 { ip ttl set 93;}
    chain ttli93 { ip ttl set 94;}
    chain ttli94 { ip ttl set 95;}
    chain ttli95 { ip ttl set 96;}
    chain ttli96 { ip ttl set 97;}
    chain ttli97 { ip ttl set 98;}
    chain ttli98 { ip ttl set 99;}
    chain ttli99 { ip ttl set 100;}
    chain ttli100 { ip ttl set 101;}
    chain ttli101 { ip ttl set 102;}
    chain ttli102 { ip ttl set 103;}
    chain ttli103 { ip ttl set 104;}
    chain ttli104 { ip ttl set 105;}
    chain ttli105 { ip ttl set 106;}
    chain ttli106 { ip ttl set 107;}
    chain ttli107 { ip ttl set 108;}
    chain ttli108 { ip ttl set 109;}
    chain ttli109 { ip ttl set 110;}
    chain ttli110 { ip ttl set 111;}
    chain ttli111 { ip ttl set 112;}
    chain ttli112 { ip ttl set 113;}
    chain ttli113 { ip ttl set 114;}
    chain ttli114 { ip ttl set 115;}
    chain ttli115 { ip ttl set 116;}
    chain ttli116 { ip ttl set 117;}
    chain ttli117 { ip ttl set 118;}
    chain ttli118 { ip ttl set 119;}
    chain ttli119 { ip ttl set 120;}
    chain ttli120 { ip ttl set 121;}
    chain ttli121 { ip ttl set 122;}
    chain ttli122 { ip ttl set 123;}
    chain ttli123 { ip ttl set 124;}
    chain ttli124 { ip ttl set 125;}
    chain ttli125 { ip ttl set 126;}
    chain ttli126 { ip ttl set 127;}
    chain ttli127 { ip ttl set 128;}
    chain ttli128 { ip ttl set 129;}
    chain ttli129 { ip ttl set 130;}
    chain ttli130 { ip ttl set 131;}
    chain ttli131 { ip ttl set 132;}
    chain ttli132 { ip ttl set 133;}
    chain ttli133 { ip ttl set 134;}
    chain ttli134 { ip ttl set 135;}
    chain ttli135 { ip ttl set 136;}
    chain ttli136 { ip ttl set 137;}
    chain ttli137 { ip ttl set 138;}
    chain ttli138 { ip ttl set 139;}
    chain ttli139 { ip ttl set 140;}
    chain ttli140 { ip ttl set 141;}
    chain ttli141 { ip ttl set 142;}
    chain ttli142 { ip ttl set 143;}
    chain ttli143 { ip ttl set 144;}
    chain ttli144 { ip ttl set 145;}
    chain ttli145 { ip ttl set 146;}
    chain ttli146 { ip ttl set 147;}
    chain ttli147 { ip ttl set 148;}
    chain ttli148 { ip ttl set 149;}
    chain ttli149 { ip ttl set 150;}
    chain ttli150 { ip ttl set 151;}
    chain ttli151 { ip ttl set 152;}
    chain ttli152 { ip ttl set 153;}
    chain ttli153 { ip ttl set 154;}
    chain ttli154 { ip ttl set 155;}
    chain ttli155 { ip ttl set 156;}
    chain ttli156 { ip ttl set 157;}
    chain ttli157 { ip ttl set 158;}
    chain ttli158 { ip ttl set 159;}
    chain ttli159 { ip ttl set 160;}
    chain ttli160 { ip ttl set 161;}
    chain ttli161 { ip ttl set 162;}
    chain ttli162 { ip ttl set 163;}
    chain ttli163 { ip ttl set 164;}
    chain ttli164 { ip ttl set 165;}
    chain ttli165 { ip ttl set 166;}
    chain ttli166 { ip ttl set 167;}
    chain ttli167 { ip ttl set 168;}
    chain ttli168 { ip ttl set 169;}
    chain ttli169 { ip ttl set 170;}
    chain ttli170 { ip ttl set 171;}
    chain ttli171 { ip ttl set 172;}
    chain ttli172 { ip ttl set 173;}
    chain ttli173 { ip ttl set 174;}
    chain ttli174 { ip ttl set 175;}
    chain ttli175 { ip ttl set 176;}
    chain ttli176 { ip ttl set 177;}
    chain ttli177 { ip ttl set 178;}
    chain ttli178 { ip ttl set 179;}
    chain ttli179 { ip ttl set 180;}
    chain ttli180 { ip ttl set 181;}
    chain ttli181 { ip ttl set 182;}
    chain ttli182 { ip ttl set 183;}
    chain ttli183 { ip ttl set 184;}
    chain ttli184 { ip ttl set 185;}
    chain ttli185 { ip ttl set 186;}
    chain ttli186 { ip ttl set 187;}
    chain ttli187 { ip ttl set 188;}
    chain ttli188 { ip ttl set 189;}
    chain ttli189 { ip ttl set 190;}
    chain ttli190 { ip ttl set 191;}
    chain ttli191 { ip ttl set 192;}
    chain ttli192 { ip ttl set 193;}
    chain ttli193 { ip ttl set 194;}
    chain ttli194 { ip ttl set 195;}
    chain ttli195 { ip ttl set 196;}
    chain ttli196 { ip ttl set 197;}
    chain ttli197 { ip ttl set 198;}
    chain ttli198 { ip ttl set 199;}
    chain ttli199 { ip ttl set 200;}
    chain ttli200 { ip ttl set 201;}
    chain ttli201 { ip ttl set 202;}
    chain ttli202 { ip ttl set 203;}
    chain ttli203 { ip ttl set 204;}
    chain ttli204 { ip ttl set 205;}
    chain ttli205 { ip ttl set 206;}
    chain ttli206 { ip ttl set 207;}
    chain ttli207 { ip ttl set 208;}
    chain ttli208 { ip ttl set 209;}
    chain ttli209 { ip ttl set 210;}
    chain ttli210 { ip ttl set 211;}
    chain ttli211 { ip ttl set 212;}
    chain ttli212 { ip ttl set 213;}
    chain ttli213 { ip ttl set 214;}
    chain ttli214 { ip ttl set 215;}
    chain ttli215 { ip ttl set 216;}
    chain ttli216 { ip ttl set 217;}
    chain ttli217 { ip ttl set 218;}
    chain ttli218 { ip ttl set 219;}
    chain ttli219 { ip ttl set 220;}
    chain ttli220 { ip ttl set 221;}
    chain ttli221 { ip ttl set 222;}
    chain ttli222 { ip ttl set 223;}
    chain ttli223 { ip ttl set 224;}
    chain ttli224 { ip ttl set 225;}
    chain ttli225 { ip ttl set 226;}
    chain ttli226 { ip ttl set 227;}
    chain ttli227 { ip ttl set 228;}
    chain ttli228 { ip ttl set 229;}
    chain ttli229 { ip ttl set 230;}
    chain ttli230 { ip ttl set 231;}
    chain ttli231 { ip ttl set 232;}
    chain ttli232 { ip ttl set 233;}
    chain ttli233 { ip ttl set 234;}
    chain ttli234 { ip ttl set 235;}
    chain ttli235 { ip ttl set 236;}
    chain ttli236 { ip ttl set 237;}
    chain ttli237 { ip ttl set 238;}
    chain ttli238 { ip ttl set 239;}
    chain ttli239 { ip ttl set 240;}
    chain ttli240 { ip ttl set 241;}
    chain ttli241 { ip ttl set 242;}
    chain ttli242 { ip ttl set 243;}
    chain ttli243 { ip ttl set 244;}
    chain ttli244 { ip ttl set 245;}
    chain ttli245 { ip ttl set 246;}
    chain ttli246 { ip ttl set 247;}
    chain ttli247 { ip ttl set 248;}
    chain ttli248 { ip ttl set 249;}
    chain ttli249 { ip ttl set 250;}
    chain ttli250 { ip ttl set 251;}
    chain ttli251 { ip ttl set 252;}
    chain ttli252 { ip ttl set 253;}
    chain ttli253 { ip ttl set 254;}
    chain ttli254 { ip ttl set 255;}

    chain prerouting {
        type filter hook prerouting priority mangle; policy accept;

        ip ttl vmap @ttli
    }
}